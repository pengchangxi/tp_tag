<!DOCTYPE HTML>
<html>
<head>
    {include file="template/head" /}
</head>
<body>
<article class="cl pd-20">
    <form action="" method="post" class="form form-horizontal" id="form-role-add">
        <input type="hidden" name="id" value="{$info.id ? $info.id : ''}"/>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>节点名称：</label>
            <div class="formControls col-xs-4 col-sm-5">
                <input type="text" class="input-text" value="{$info.name ? $info.name : ''}" placeholder="请输入节点名称" id="name" name="name">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>上级节点：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="select-box inline">
                <select class="select" id="" name="pid">
                    <option value="">顶级菜单</option>
                    {$nav_trees}
                </select>
                </span>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>URL：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="{$info.url ? $info.url : ''}" placeholder="请输入节点名称" id="url" name="url">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3">描述：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <textarea name="desc" cols="" rows="" class="textarea"  placeholder="说点什么" >{$info.desc ? $info.desc : ''}</textarea>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3">排序：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="number" class="input-text" value="{$info.list_order ? $info.list_order : ''}" placeholder="请输入节点名称" id="list_order" name="list_order">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>是否菜单：</label>
            <div class="formControls col-xs-8 col-sm-9 skin-minimal">
                <div class="radio-box">
                    <input name="ismenu" type="radio" id="ismenu-1" value="1" <?php echo isset($info['ismenu'])&&$info['ismenu']==1 || empty($info)?" checked":""; ?>>
                    <label for="ismenu-1">是</label>
                </div>
                <div class="radio-box">
                    <input name="ismenu" type="radio" id="ismenu-0" value="0" <?php echo isset($info['ismenu'])&&$info['ismenu']===0?" checked":""; ?>>
                    <label for="ismenu-0">否</label>
                </div>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>状态：</label>
            <div class="formControls col-xs-8 col-sm-9 skin-minimal">
                <div class="radio-box">
                    <input name="status" type="radio" id="status-1" value="1" <?php echo isset($info['status'])&&$info['status']==1 || empty($info)?" checked":""; ?>>
                    <label for="status-1">显示</label>
                </div>
                <div class="radio-box">
                    <input name="status" type="radio" id="status-0" value="0" <?php echo isset($info['status'])&&$info['status']===0?" checked":""; ?>>
                    <label for="status-0">隐藏</label>
                </div>
            </div>
        </div>



        <div class="row cl">
            <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
                <input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
            </div>
        </div>
    </form>
</article>

<!--_footer 作为公共模版分离出去-->
{include file="template/footer" /}
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
{include file="template/validation" /}
<script type="text/javascript">
    $(function(){
        $("#form-role-add").validate({
            rules:{
                name:{
                    required:true,
                    minlength:2,
                    maxlength:16
                },
                status:{
                    required:true
                }

            },
            onkeyup:false,
            focusCleanup:true,
            success:"valid",
            submitHandler:function(form){
                $(form).ajaxSubmit({
                    type: 'post', // 提交方式 get/post
                    url: '{if condition="!empty($info)"}/admin/menu/edit{else/}/admin/menu/add{/if}', // 需要提交的 url
                    success: function(data) { // data 保存提交后返回的数据，一般为 json 数据
                        if(data.code!=1){
                            layer.msg(data.msg,{icon:2,time:1000});
                            return false;
                        }
                        layer.msg(data.msg,{icon:1,time:1000});
                        setTimeout(function(){
                            parent.window.location.href=data.url;
                            var index = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(index);
                        }, 1000);
                    }
                });
            }
        });
    });
</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>